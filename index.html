<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hezbollah Losses</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2em;
            text-align: center;
            background-color: #f9f9f9;
        }

         nav {
            width: 100%;
            background-color: #333;
            padding: 1em;
            box-sizing: border-box;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin: 0 1em;
            font-weight: bold;
        }
        nav a:hover {
            text-decoration: underline;
        }
        h1 {
            font-size: 2em;
            color: #333;
            margin-bottom: 0.5em;
        }
        .counters {
            display: flex;
            justify-content: center;
            gap: 2em;
            margin-top: 1em;
            margin-bottom: 2em;
        }
        .counter {
            background-color: #333;
            color: #fff;
            border-radius: 8px;
            padding: 1em 2em;
            width: 150px;
        }
        .counter h2 {
            font-size: 1.5em;
            margin: 0.3em 0;
        }
        .counter p {
            font-size: 0.9em;
            color: #ddd;
        }
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }
        .gallery img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            transition: transform 0.2s ease;
        }
        .gallery-item {
            flex: 1 1 200px;
            max-width: 300px;
            overflow: hidden;
            position: relative;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .gallery-item:hover img {
            transform: scale(1.05);
        }
        .loading {
            font-size: 1.2em;
            color: #666;
            margin-top: 2em;
        }
    </style>
</head>
<body>
<!-- Navigation Menu -->
  <nav>
        <a href="index.html">Hezbollah Losses</a>
        <a href="page1.html">Name Search</a>
        <a href="page2.html">CSV Formatter</a>
        <a href="page3.html">TBD</a>
    </nav>
    <h1>Hezbollah Losses</h1>

    <div class="counters">
        <div class="counter">
            <h2 id="beforeCount">0</h2>
            <p>Before 23 Sep 2024</p>
        </div>
        <div class="counter">
            <h2 id="afterCount">0</h2>
            <p>After 23 Sep 2024</p>
        </div>
        <div class="counter">
            <h2 id="totalCount">0</h2>
            <p>Total Records</p>
        </div>
    </div>

    <h2>Image Gallery</h2>
    <div id="gallery" class="gallery">
        <p class="loading">Loading images...</p>
    </div>

    <script>
        const csvUrl = "https://raw.githubusercontent.com/middle-east-buka/Lebanon/main/hezbollah-martyrs/hezbollah-losses-escalation.csv";
    
        const imageDirUrl = "https://raw.githubusercontent.com/middle-east-buka/Lebanon/main/hezbollah-martyrs/images/";

        // Load and parse CSV
        async function loadCSV() {
            const response = await fetch(csvUrl);
            const text = await response.text();
            const rows = text.trim().split("\n").slice(1);  // Remove header
            let beforeCount = 0, afterCount = 0;
            const thresholdDate = new Date("24/09/2024");

            rows.forEach(row => {
                const columns = row.split(",");
                const dayString = columns[6].trim();
                const recordDate = new Date(dayString);
                if (recordDate < thresholdDate) {
                    beforeCount++;
                } else {
                    afterCount++;
                }
            });

            // Update counters
            document.getElementById("beforeCount").textContent = beforeCount;
            document.getElementById("afterCount").textContent = afterCount;
            document.getElementById("totalCount").textContent = rows.length;
        }

        // Load images
        async function loadImages() {
            const gallery = document.getElementById("gallery");
            gallery.innerHTML = "";  // Clear loading text

            // Add images dynamically (assuming image filenames are known)
            const imageFiles = ["image1.jpg", "image2.jpg", "image3.jpg"]; // Add all image filenames here
            imageFiles.forEach(fileName => {
                const imgUrl = `${imageDirUrl}${fileName}`;
                const imgElement = document.createElement("img");
                imgElement.src = imgUrl;
                imgElement.alt = "Hezbollah Martyr";

                const galleryItem = document.createElement("div");
                galleryItem.className = "gallery-item";
                galleryItem.appendChild(imgElement);
                gallery.appendChild(galleryItem);
            });
        }

        // Initialize page content
        loadCSV();
        loadImages();
    </script>

</body>
</html>
